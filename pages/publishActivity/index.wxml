<view class="page">
  <!-- åŠ è½½ä¸­çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-container">
    <view class="loading-icon"></view>
    <text>åŠ è½½ä¸­...</text>
  </view>


	<view class="form-content">
			<view class="form-group">
				<view class="form-label">æ´»åŠ¨æ ‡é¢˜
					<text class="required">*</text>
				</view>
				<input
				 class="form-control"
				 placeholder="è¯·è¾“å…¥æ´»åŠ¨æ ‡é¢˜"
				 value="{{formData.title}}"
				 bindinput="onInputTitle"
				/>
			</view>

			<view class="form-group">
				<view class="form-label">æ´»åŠ¨å°é¢
					<text class="required">*</text>
				</view>
				<view class="form-cover">
					<block wx:if="{{formData.coverImage}}">
						<image class="cover-image" src="{{formData.coverImage}}" mode="aspectFill" />
						<view class="cover-change" bindtap="chooseCoverImage">æ›´æ¢å°é¢</view>
					</block>
					<view wx:else class="cover-picker" bindtap="chooseCoverImage">
						<view class="picker-icon">+</view>
						<view class="picker-text">ä¸Šä¼ å°é¢å›¾ç‰‡</view>
					</view>
				</view>
			</view>

			<view class="form-group">
				<view class="form-label">æ´»åŠ¨åˆ†ç±»
					<text class="required">*</text>
				</view>
				<picker
				 class="form-picker"
				 mode="selector"
				 range="{{categories}}"
				 bindchange="onSelectCategory"
				>
					<view class="picker-value">
						{{formData.category || 'è¯·é€‰æ‹©æ´»åŠ¨åˆ†ç±»'}}
					</view>
				</picker>
			</view>

			<view class="form-group">
				<view class="form-label">æ´»åŠ¨æ—¶é—´</view>
				<view class="time-container">
					<view class="time-item">
						<view class="time-label">å¼€å§‹æ—¶é—´</view>
						<view class="time-picker" bindtap="showDatePicker" data-type="start">
							{{formData.startTime}}
						</view>
					</view>
					<view class="time-separator">-</view>
					<view class="time-item">
						<view class="time-label">ç»“æŸæ—¶é—´</view>
						<view class="time-picker" bindtap="showDatePicker" data-type="end">
							{{formData.endTime}}
						</view>
					</view>
				</view>
			</view>

			<view class="form-group">
				<view class="form-label">æ´»åŠ¨åœ°ç‚¹
					<text class="required">*</text>
				</view>
				<view class="location-picker" bindtap="chooseLocation">
					<block wx:if="{{formData.location}}">
						<view class="location-text">{{formData.location}}</view>
						<view class="location-coordinates">
							{{formData.coordinates.latitude}}, {{formData.coordinates.longitude}}
						</view>
					</block>
					<view wx:else class="location-placeholder">
						<text class="location-icon">ğŸ“</text>
						<text>ç‚¹å‡»é€‰æ‹©ä½ç½®</text>
					</view>
				</view>
			</view>

			<view class="form-group">
				<view class="form-label">æ´»åŠ¨æè¿°</view>
				<textarea
				 class="form-textarea"
				 placeholder="è¯·è¾“å…¥æ´»åŠ¨æè¿°..."
				 value="{{formData.description}}"
				 bindinput="onInputDescription"
				/>
			</view>
	</view>

	<!-- åº•éƒ¨æ“ä½œæ  -->
	<view class="action-bar safe-area-bottom">
		<button class="btn-cancel" bindtap="resetForm">å–æ¶ˆ</button>
		<button 
		class="btn-publish" 
		bindtap="submitForm"
		loading="{{submitting}}"
		>å‘å¸ƒæ´»åŠ¨</button>
	</view>
</view>

