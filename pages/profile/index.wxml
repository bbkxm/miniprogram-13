<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯ -->
  <view class="user-info-card">
    <view class="user-avatar-container" bindtap="editUserInfo">
      <image class="user-avatar" src="{{userInfo.avatar}}" mode="aspectFill"></image>
      <view class="edit-badge">
        <text class="edit-icon">âœï¸</text>
      </view>
    </view>
    <view class="user-details">
      <view class="user-nickname">{{userInfo.nickname}}</view>
      <view class="user-id">ID: {{userInfo.id}}</view>
    </view>
  </view>

  <!-- æ´»åŠ¨æ ‡ç­¾é¡µ -->
  <view class="activities-container">
    <!-- é¡¶éƒ¨Tabåˆ‡æ¢ -->
    <view class="tabs-container">
      <view 
        wx:for="{{tabs}}" 
        wx:key="id" 
        class="tab {{currentTab === item.id ? 'active' : ''}}"
        data-id="{{item.id}}"
        bindtap="switchTab"
      >
        {{item.name}}
      </view>
    </view>

    <!-- å·²åŠ å…¥çš„æ´»åŠ¨ -->
    <view wx:if="{{currentTab === 'joined'}}" class="tab-content">
      <!-- åŠ è½½ä¸­çŠ¶æ€ -->
      <view wx:if="{{loading}}" class="loading-container">
        <view class="loading-icon"></view>
        <text>åŠ è½½ä¸­...</text>
      </view>
      
      <!-- æ´»åŠ¨åˆ—è¡¨ -->
      <block wx:if="{{!loading && activities.joined && activities.joined.length > 0}}">
        <view 
          wx:for="{{activities.joined}}" 
          wx:key="id" 
          class="activity-card"
          data-id="{{item.id}}"
          bindtap="navigateToDetail"
        >
          <image 
            class="activity-cover" 
            src="{{item.coverImage}}" 
            mode="aspectFill"
          ></image>
          <view class="activity-info">
            <view class="activity-title">{{item.title}}</view>
            <view class="activity-meta">
              <view class="activity-creator">
                <image class="creator-avatar" src="{{item.creator.avatar}}"></image>
                <text>{{item.creator.nickname}}</text>
              </view>
              <view class="activity-participants">{{item.participants.length}}äººå‚ä¸</view>
            </view>
          </view>
        </view>
      </block>
      
      <!-- ç©ºçŠ¶æ€ -->
      <view wx:if="{{!loading && (!activities.joined || activities.joined.length === 0)}}" class="empty-container">
        <view class="empty-icon"></view>
        <text>æš‚æœªåŠ å…¥ä»»ä½•æ´»åŠ¨</text>
        <button class="btn-create" bindtap="navigateToPublish">å»æµè§ˆæ´»åŠ¨</button>
      </view>
    </view>

    <!-- å·²åˆ›å»ºçš„æ´»åŠ¨ -->
    <view wx:if="{{currentTab === 'created'}}" class="tab-content">
      <!-- åŠ è½½ä¸­çŠ¶æ€ -->
      <view wx:if="{{loading}}" class="loading-container">
        <view class="loading-icon"></view>
        <text>åŠ è½½ä¸­...</text>
      </view>
      
      <!-- æ´»åŠ¨åˆ—è¡¨ -->
      <block wx:if="{{!loading && activities.created && activities.created.length > 0}}">
        <view 
          wx:for="{{activities.created}}" 
          wx:key="id" 
          class="activity-card"
          data-id="{{item.id}}"
          bindtap="navigateToDetail"
        >
          <image 
            class="activity-cover" 
            src="{{item.coverImage}}" 
            mode="aspectFill"
          ></image>
          <view class="activity-info">
            <view class="activity-title">{{item.title}}</view>
            <view class="activity-meta">
              <view class="activity-time">
                <text class="time-icon">ğŸ•’</text>
                <text>{{item.startTime}}</text>
              </view>
              <view class="activity-participants">{{item.participants.length}}äººå‚ä¸</view>
            </view>
          </view>
        </view>
      </block>
      
      <!-- ç©ºçŠ¶æ€ -->
      <view wx:if="{{!loading && (!activities.created || activities.created.length === 0)}}" class="empty-container">
        <view class="empty-icon"></view>
        <text>æš‚æœªåˆ›å»ºä»»ä½•æ´»åŠ¨</text>
        <button class="btn-create" bindtap="navigateToPublish">åˆ›å»ºæ´»åŠ¨</button>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œåŒº -->
  <view class="footer-actions">
    <button class="btn-setting" bindtap="editUserInfo">ç¼–è¾‘èµ„æ–™</button>
    <button class="btn-logout" bindtap="logout">é€€å‡ºç™»å½•</button>
  </view>
</view> 